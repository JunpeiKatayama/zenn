---
title: League of Legends 縺ｮ謌ｦ邵ｾ繧帝寔險医☆繧・Discord BOT 繧剃ｽ懊▲縺溘Γ繝｢
emoji: "ｧ・
type: "tech" # tech: 謚陦楢ｨ倅ｺ・/ idea: 繧｢繧､繝・い
topics: ["lol", "riot-api", "discord", "railway"]
published: false
---

## 縺ｯ縺倥ａ縺ｫ

League of Legends(莉･髯・LoL)縺ｮ謌ｦ邵ｾ繧帝寔險医☆繧・Discord 縺ｮ BOT 繧剃ｽ懊ｊ縺ｾ縺励◆縲・
OPGG 縺縺ｨ蠎・相縺ｮ陦ｨ遉ｺ鬆伜沺縺悟､ｧ縺阪☆縺弱※豌励↓縺ｪ繧九◆繧√・
![OPGG縺ｮSS](/images/image.png)

縺昴・荳ｭ縺ｧ縲∝・縺ｫ遏･縺｣縺ｦ縺・ｌ縺ｰ繧医°縺｣縺溘↑・槭→諤昴▲縺溘％縺ｨ繧定ｨ倩ｼ峨＠縺ｾ縺吶・

縺ｪ縺翫∝ｾ瑚ｿｰ縺励∪縺吶′縲√％縺ｮ BOT 縺ｯ霄ｫ蜀・髄縺代〒縺ゅｊ縲∝・縺ｦ縺ｮ繧ｵ繝ｼ繝舌↓蟇ｾ縺励※諡帛ｾ・〒縺阪ｋ繧医≧縺ｫ縺吶ｋ縺､繧ゅｊ縺ｯ縺ゅｊ縺ｾ縺帙ｓ縲・
・医し繝ｼ繝舌・邯ｭ謖√さ繧ｹ繝医′縺吶＃縺・％縺ｨ縺ｫ縺ｪ繧翫◎縺・↑縺ｮ縺ｧ・・

縺ｾ縺溘∝ｮ溯｣・・縺ｻ縺ｨ繧薙←繧・AI 縺ｫ莉ｻ縺帙※縺・ｋ縺ｨ縺・≧縺薙→繧ゅ≠繧翫∝・菴鍋噪縺ｪ隱ｬ譏弱′縺ゅｓ縺ｾ繧翫↑縺・√∩縺溘＞縺ｪ縺薙→縺ｫ縺ｪ縺｣縺ｦ縺励∪繧上↑縺・°蝓ｷ遲・燕縺九ｉ荳榊ｮ峨〒縺ゅｋ縲・

## BOT 縺ｮ邏ｹ莉・

莉･荳九・繧医≧縺ｫ縲√さ繝槭Φ繝峨↓蠢懊§縺滄寔險育ｵ先棡繧堤判蜒上〒霑泌唆縺吶ｋ BOT 縺ｧ縺吶・
縺薙・萓九・ `/recent` 繧ｳ繝槭Φ繝峨↓繧医ｋ繧ゅ・縲・
![逶ｴ霑代・謌ｦ邵ｾ繧堤樟縺决ecent繧ｳ繝槭Φ繝峨・霑斐☆逕ｻ蜒従(/images/recent.png)

莉悶↓繧ら峩霑代・謌ｦ邵ｾ繧帝寔險医＠縺・`/stats` 繧ｳ繝槭Φ繝峨∫音螳壹・繝√Ε繝ｳ繝斐が繝ｳ繧呈欠螳壹＠縺ｦ謌ｦ邵ｾ繧帝寔險医〒縺阪ｋ `/champion` 繧ｳ繝槭Φ繝峨↑縺ｩ縺後≠繧翫∪縺吶・

![逶ｴ霑・00隧ｦ蜷医・謌ｦ邵ｾ繧偵∪縺ｨ繧√◆stats繧ｳ繝槭Φ繝峨・霑斐☆逕ｻ蜒従(/images/stats.png)
![迚ｹ螳壹メ繝｣繝ｳ繝斐が繝ｳ縺ｮ謌ｦ邵ｾ繧偵∪縺ｨ繧√◆champion繧ｳ繝槭Φ繝峨・霑斐☆逕ｻ蜒従(/images/Sylas_stats.png)
(縺励ｇ縺・ｂ縺ｪ縺・メ繝｣繝ｳ繝斐が繝ｳ縺ｰ縺九ｊ菴ｿ縺｣縺ｦ蜍晉紫縺御ｽ弱＞縺薙→縺ｫ縺ｯ逶ｮ繧偵▽縺ｶ縺｣縺ｦ縺上□縺輔＞)

## 遏･縺｣縺ｦ縺翫″縺溘°縺｣縺溘％縺ｨ

縺昴ｌ縺ｧ縺ｯ縲。OT 繧剃ｽ懊ｋ蜑阪↓遏･縺｣縺ｦ縺・ｋ縺ｨ繧医°縺｣縺溘↑・槭→縺・≧縺薙→繧剃ｻ･荳九↓險倩ｼ峨＠縺ｾ縺吶・

### Riot API 縺ｮ蜴ｳ縺励☆縺弱ｋ繝ｬ繝ｼ繝医Μ繝溘ャ繝・

Developper Portal 縺ｮ閾ｪ霄ｫ縺ｮ逋ｻ骭ｲ縺励◆ APP 諠・ｱ縺ｧ遒ｺ隱阪〒縺阪∪縺吶′縲∫ｵ先ｧ句宍縺励＞繝ｬ繝ｼ繝医Μ繝溘ャ繝医′隱ｲ縺帙ｉ繧後※縺・∪縺吶・

```
20 requests every 1 seconds
100 requests every 2 minutes
```

萓九∴縺ｰ隧ｦ蜷域ュ蝣ｱ繧貞叙蠕励＠縺溘＞縺ｨ縺阪√∪縺壹・ API 縺ｫ蝠上＞蜷医ｏ縺帙√◎縺ｮ繝ｦ繝ｼ繧ｶ縺ｮ繧ｲ繝ｼ繝縺ｮ ID 縺ｮ繝ｪ繧ｹ繝医ｒ蜿門ｾ励＠縺ｾ縺吶・
隧ｦ蜷郁ｩｳ邏ｰ繧偵∪縺ｨ繧√※蜿門ｾ励☆繧・API 縺ｯ縺ｪ縺・◆繧√・ 莉ｶ縺壹▽蝠上＞蜷医ｏ縺帙ｋ縺励°縺ゅｊ縺ｾ縺帙ｓ縲・
100 隧ｦ蜷亥・譫舌＠縺溘＞縺ｪ繧峨√◎繧後□縺代〒 101 蝗槭Μ繧ｯ繧ｨ繧ｹ繝医☆繧句ｿ・ｦ√′縺ゅｊ縺ｾ縺吶・

蛻ｩ逕ｨ閠・′蜷梧凾縺ｫ繧ｳ繝槭Φ繝峨ｒ菴ｿ逕ｨ縺吶ｋ縺薙→繧ょ刈蜻ｳ縺吶ｋ縺ｨ縲∫ｰ｡蜊倥↓繝ｬ繝ｼ繝医Μ繝溘ャ繝医↓驕斐＠縺ｦ縺励∪縺・◆繧√√◎繧後ｒ閠・・縺励※縺｡繧・▲縺ｨ縺壹▽髮・ｨ医☆繧九ｈ縺・↑蟾･螟ｫ縺悟ｿ・ｦ√→縺ｪ繧翫∪縺吶・

### 繝ｬ繝ｼ繝医Μ繝溘ャ繝亥ｯｾ遲・

莉･荳九さ繝ｼ繝峨ヶ繝ｭ繝・け驛ｨ蛻・・ AI 縺ｫ隱ｿ譟ｻ縺輔ｌ縺溷屓遲斐ｒ蠑慕畑縺励※縺・∪縺吶・

1. 繝ｪ繧ｯ繧ｨ繧ｹ繝医Ξ繝ｼ繝医ｒ險域ｸｬ縺励∝酔譎ょｮ溯｡後ｒ逶ｴ蛻怜喧
   ```
   繧ｷ繝ｳ繝励Ν縺ｪ繝医・繧ｯ繝ｳ繝舌こ繝・ヨ縲・
   繝・ヵ繧ｩ繝ｫ繝医・ 20 req/sec 縺ｨ 100 req/120s 繧偵く繝･繝ｼ (deque) 縺ｧ險域ｸｬ縺励∬ｶ・∴縺昴≧縺ｪ繧・asyncio.sleep 縺ｧ蠕・ｩ溘＠縺ｦ縺九ｉ繧ｿ繧､繝繧ｹ繧ｿ繝ｳ繝励ｒ險倬鹸縲・
   asyncio.Lock 縺ｧ蜷梧凾螳溯｡後ｒ逶ｴ蛻怜喧
   ```
2. 繧ｭ繝｣繝・す繝･縺ｫ繧医ｋ蜻ｼ縺ｳ蜃ｺ縺怜炎貂・
   ```
   PostgreSQL繝吶・繧ｹ縺ｮTTL繧ｭ繝｣繝・す繝･繧剃ｽｿ縺・ヾummoner縺ｯ24h縲√・繝・メ荳隕ｧ縺ｯ5蛻・√・繝・メ隧ｳ邏ｰ縺ｯ譛滄剞縺ｪ縺励〒菫晏ｭ假ｼ・onfig.py蜿ら・・峨・
   縺ｾ縺・get_many 縺ｧ繝舌Ν繧ｯ繝偵ャ繝医ｒ諡ｾ縺・∵悴蜿門ｾ怜・縺縺羨PI繧貞娼縺上◆繧√∝ｮ溘Μ繧ｯ繧ｨ繧ｹ繝域焚繧貞悸邵ｮ縲・
   ```
   繝槭ャ繝∬ｩｳ邏ｰ縺檎┌譛滄剞繧ｭ繝｣繝・す繝･縺ｫ縺ｪ縺｣縺ｦ縺・ｋ縺ｮ縺ｯ縲∽ｸ蠎ｦ遒ｺ螳壹＠縺溯ｩｦ蜷育ｵ先棡縺ｯ螟画峩縺輔ｌ縺ｪ縺・°繧峨〒縺吶・
   縺薙ｌ縺ｫ繧医▲縺ｦ螟ｧ驥上・繧ｭ繝｣繝・す繝･縺悟ｿ・ｦ√→縺ｪ繧翫√さ繧ｹ繝医ｒ閠・∴繧九→縲。OT 繧貞､ｧ隕乗ｨ｡縺ｫ蜈ｬ髢九☆繧九％縺ｨ縺ｯ荳榊庄縺ｨ縺ｪ繧翫∪縺励◆縲・
   ・医％繧薙↑繧ゅ・縺ｫ譛・1000 蜀・ｂ謇輔＞縺溘￥縺ｪ縺・ｈ縺ｭ繝ｻ繝ｻ繝ｻ・滂ｼ・
3. 讒矩蛹悶Ο繧ｰ
   ```
   api_request 繝｡繝医Μ繧ｯ繧ｹ繧谷SON繝ｭ繧ｮ繝ｳ繧ｰ縲・29譎ゅ・ api_rate_limit 繧定ｨ倬鹸縲・
   繧ｭ繝｣繝・す繝･縺ｮ繝偵ャ繝・繝溘せ繧ゅう繝吶Φ繝医〒蜃ｺ繧九・縺ｧ縲∝ｮ滄圀縺ｮ蜻ｼ縺ｳ蜃ｺ縺礼憾豕√ｒ繝ｭ繧ｰ縺九ｉ霑ｽ霍｡蜿ｯ閭ｽ縲・
   ```
   蛟倶ｺｺ髢狗匱縺ゅｋ縺ゅｋ縺ｪ縺ｮ縺ｧ縺吶′縲、PM 縺ｯ鬮倥☆縺弱※菴ｿ縺医↑縺・◆繧∵ｧ矩蛹悶Ο繧ｰ縺ｯ萓ｿ蛻ｩ縺ｧ縺吶・
   迚ｹ縺ｫ莉雁屓縺ｯ縺ｻ縺ｨ繧薙←蜈ｨ縺ｦ繧偵ヰ繧､繝悶さ繝ｼ繝・ぅ繝ｳ繧ｰ縺ｧ螳溯｣・＠縺溘◆繧√∵ｰ励↓縺ｪ縺｣縺溘→縺阪↓繝ｭ繧ｰ繧堤｢ｺ隱阪＠縺ｦ縲∵が縺昴≧縺ｪ繝ｭ繧ｸ繝・け繧呈耳貂ｬ縺励※逶ｴ縺励※繧ゅｉ縺・√→縺・▲縺滓枚閼医〒繧ょｽｹ縺ｫ遶九■縺ｾ縺励◆縲・

### LoL 髢｢騾｣縺ｮ髱咏噪繝輔ぃ繧､繝ｫ

LoL 髢｢騾｣縺ｮ髱咏噪繝輔ぃ繧､繝ｫ(繝√Ε繝ｳ繝斐が繝ｳ繧｢繧､繧ｳ繝ｳ繝ｻ繧ｹ繝励Λ繝・す繝･繧｢繝ｼ繝・繧｢繧､繝・Β繧・し繝｢繝翫・繧ｹ繝壹Ν縺ｮ繧｢繧､繧ｳ繝ｳ遲・縺ｯ DataDoragon 縺ｨ縺・≧ Riot 蜈ｬ蠑上・ CDN 縺九ｉ蜿門ｾ励〒縺阪∪縺吶・
https://developer.riotgames.com/docs/lol

縺｡縺ｪ縺ｿ縺ｫ縲∫判蜒上・繝代せ繧・錐蜑阪′諤昴▲縺ｦ縺・◆繧ゅ・縺ｨ逡ｰ縺ｪ繧九％縺ｨ縺後◆縺ｾ縺ｫ縺ゅｊ縺ｾ縺吶・

萓九∴縺ｰ縲√ヵ繧｣繝峨Ν繧ｹ繝・ぅ繝・け繧ｹ縺ｮ繧｢繧､繧ｳ繝ｳ縺悟叙蠕励〒縺阪↑縺・撫鬘後′縺ゅｊ縺ｾ縺励◆縲・
繝輔ぅ繝峨Ν縺ｯ Riot API 縺ｧ縺ｯ `FiddleSticks` 縺ｮ陦ｨ險倥→縺輔ｌ縺ｦ縺・∪縺吶′縲．ataDoragon 縺ｧ縺ｯ `Fiddlesticks` 縺ｧ陦ｨ險倥＆繧後※縺・∪縺吶・
縺ｪ縺ｮ縺ｧ縲∝ｰら畑縺ｮ霎樊嶌繧偵＞縺上▽縺狗畑諢上＠縺ｦ縺ゅ￡縺ｪ縺・→縺・￠縺ｪ縺・√→縺・≧縺薙→縺瑚ｵｷ縺薙ｋ縺ｨ諤昴＞縺ｾ縺吶・

### 繝・・繝ｭ繧､蜈亥撫鬘・

蜒輔′縺薙・讌ｭ逡後↓蜈･縺｣縺溘・縺九ｊ縺ｮ縺薙ｍ縺ｯ Heroku 縺ｫ辟｡譁吶〒繝帙せ繝・ぅ繝ｳ繧ｰ縺ｧ縺阪※縺・◆縺ｮ縺ｧ縺吶′縲∽ｻ翫・辟｡譁吶・繧ｵ繝ｼ繝薙せ縺｣縺ｦ縺ｻ縺ｨ繧薙←縺ｪ縺・〒縺吶・
縺薙・ BOT 縺ｯ螟ｧ縺励※繧ｹ繝壹ャ繧ｯ繧貞ｿ・ｦ√→縺励↑縺・◆繧√√〒縺阪ｋ縺縺大ｮ我ｸ翫′繧翫↑繧ｵ繝ｼ繝薙せ繧剃ｽｿ縺・◆縺・√→縺ｯ縺・∴迺ｰ蠅・ｧ狗ｯ峨↓闍ｦ蠢・☆繧九・縺ｯ雖後□繝ｻ繝ｻ繝ｻ縺ｨ縺・≧縺薙→縺ｧ Railway 繧帝∈縺ｳ縺ｾ縺励◆縲・

https://railway.com/

Railway 縺ｯ蛻晄怦辟｡譁吶〒 Hobby 繝励Λ繝ｳ繧剃ｽｿ縺医∪縺吶・
Hobby 繝励Λ繝ｳ縺ｯ豈取怦$5 縺ｮ繧ｯ繝ｬ繧ｸ繝・ヨ繧定ｳｼ蜈･縺励※縲√◎繧後ｒ菴ｿ縺・・繧九∪縺ｧ縺ｯ辟｡譁・?)縺ｧ菴ｿ縺医ｋ縺ｨ縺・▲縺溘ｂ縺ｮ縲・
辟｡譁吶・繝ｩ繝ｳ縺ｮ蝣ｴ蜷医・$1 蛻・・豈取怦辟｡譁吶〒菴ｿ縺医ｋ縺昴≧縺ｧ縺吶・

BOT 譛ｬ菴・+ Postgres 繧貞濠譛医⊇縺ｩ蛻ｩ逕ｨ縺励※縲・1 繧ゅ°縺九▲縺ｦ縺・↑縺・・縺ｧ縲∫┌譁吶・繝ｩ繝ｳ縺ｧ繧ゅ＞縺代ｋ縺九ｂ・・
![蜊頑怦縺､縺九▲縺溘→縺阪・繧ｳ繧ｹ繝域─](/images/railway-trial-banner.png)

縺輔ｉ縺ｫ縲ヽailway 縺ｧ縺ｯ DockerFile 繧堤ｽｮ縺・※縺翫￥縺縺代〒邁｡蜊倥↓ GitHub 繝ｪ繝昴ず繝医Μ縺ｨ騾｣謳ｺ縺励※繝・・繝ｭ繧､縺吶ｋ縺薙→縺後〒縺阪ｋ縺ｮ縺ｧ縲∫腸蠅・ｧ狗ｯ峨′繧√■繧・￥縺｡繧・･ｽ縺ｧ縺吶・
(1 譌･ 30 蝗樒ｨ句ｺｦ縺ｮ繝・・繝ｭ繧､蝗樊焚縺ｮ荳企剞縺後≠繧九・縺ｧ豕ｨ諢擾ｼ・
Postgres 遲峨・繝ｪ繧ｽ繝ｼ繧ｹ繧ゅヶ繝ｩ繧ｦ繧ｶ荳翫°繧峨⊃縺｡縺ｽ縺｡繧・ｌ縺ｰ邁｡蜊倥↓菴懈・縺ｧ縺阪∪縺吶ゆｾｿ蛻ｩ縲・

![縺薙ｓ縺ｪ諢溘§縺ｮ邂｡逅・判髱｢](/images/railway-dashboard.png)
Postgres 縺ｫ縺､縺ｪ縺弱◆縺九▲縺溘ｉ縺薙・迺ｰ蠅・､画焚繧定ｨｭ螳壹＠縺ｦ縺ｭ・√∩縺溘＞縺ｪ譯亥・繧ゅ≠繧九・縺ｧ霑ｷ蟄舌↓縺ｪ繧九％縺ｨ縺ｯ縺ｪ縺輔◎縺・・

## LoL 縺ｮ謌ｦ邵ｾ髮・ｨ・BOT 繧剃ｽ懊▲縺滓─諠ｳ

OPGG 繧定ｦ九ｋ繧医ｊ繧ゅせ繝・く繝ｪ縺ｨ謌ｦ邵ｾ繧定ｦ九ｉ繧後ｋ繧医≧縺ｫ縺ｪ縺｣縺ｦ繧医°縺｣縺溘→諤昴＞縺ｾ縺吶・
縺ｾ縺溘√ヵ繝ｬ繝ｳ繝峨↓菴ｿ縺｣縺ｦ繧ゅｉ縺｣縺ｦ繝輔ぅ繝ｼ繝峨ヰ繝・け繧貞渚譏縺励◆繧翫√％縺､縺薙▽謾ｹ蝟・＠縺溘ｊ縺ｨ縺・▲縺滓･ｽ縺励＆繧呈昴＞蜃ｺ縺輔○縺ｦ縺上ｌ縺ｾ縺励◆縲・
縺薙≧縺・▲縺溘い繝励Μ縺ｧ縺ｯ荳也阜逧・↑繝√Ε繝ｳ繝斐が繝ｳ繝薙Ν繝峨・邨ｱ險医ｒ蜿悶ｋ縺薙→縺ｯ縺ｧ縺阪∪縺帙ｓ縺後√・繝ｬ繧､繝､繝ｼ蛟倶ｺｺ繝ｬ繝吶Ν縺ｮ諠・ｱ縺ｮ邨ｱ險医ｒ蜿悶ｋ縺ｮ縺ｫ縺ｯ蜈・・縺縺ｨ諢溘§縺ｾ縺励◆・・

縺薙ｌ繧定ｦ九※繧・▲縺ｦ縺ｿ縺溘＞縺ｪ縺ｨ諤昴▲縺滓婿縲，laude Code 螂醍ｴ・＠縺ｦ菴懊▲縺ｦ縺ｨ縺・≧縺縺代〒繝昴Φ縲√→縺ｧ縺阪ｋ繧医≧縺ｫ縺ｪ縺｣縺ｦ縺・ｋ縺ｮ縺ｧ縺翫☆縺吶ａ縺ｧ縺吶・
(騾ｲ蛹悶′譌ｩ縺吶℃縺ｦ縺､縺・※縺・￠縺ｪ縺・・繝ｻ繝ｻ)

